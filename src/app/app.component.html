<div class="container" *ngIf="!submitted">
  <div class="text-center">
    <h1>Employee Profile Form</h1>
  </div>
  <div class="second col-xs-10 col-md-9 col-xs-offset-1 col-md-offset-2">
    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
      <div formGroupName="userData">

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="username">Username <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-6 iblock">
            <input
              type="text"
              id="fname"
              placeholder="John"
              formControlName="fname"
              class="form-control">
            </div>
            <div class="gap"></div>
            <div class="col-xs-12 col-md-5 iblock">
              <input
                type="text"
                id="lname"
                placeholder="Wick"
                formControlName="lname"
                class="form-control">
            </div>
              <span *ngIf="(signupForm.get('userData.fname').hasError('nameIsForbidden') && (signupForm.get('userData.fname').touched)) || 
              (signupForm.get('userData.lname').hasError('nameIsForbidden') && signupForm.get('userData.lname').touched)" class="help-block">This name is invalid!</span>
              <span *ngIf="(signupForm.get('userData.fname').hasError('required')||signupForm.get('userData.lname').hasError('required'))
              && (signupForm.get('userData.fname').touched||signupForm.get('userData.lname').touched)" class="help-block">This field is required!</span>
            </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="email">Email  <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
              <input
              type="text"
              id="email"
              formControlName="email"
              class="form-control">
            </div>
            <span
              *ngIf="!signupForm.get('userData.email').valid && signupForm.get('userData.email').touched"
              class="help-block">Please enter a valid email!</span>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="dob">Date of Birth  <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
              <input
              type="date"
              id="dob"
              formControlName="dob"
              class="form-control">
            </div>
            <span *ngIf="(signupForm.get('userData.dob').hasError('invalidDate'))" class="help-block">Please enter a valid date</span>
            <span *ngIf="(signupForm.get('userData.dob').hasError('required') && signupForm.get('userData.dob').touched) " class="help-block">Please enter a Date of Birth</span>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="gender">Gender</label>
            <div class="radio col-xs-12 col-md-2 setRadio" *ngFor="let gender of genders">
              <input
                  type="radio"
                  formControlName="gender"
                  [value]="gender">
              <label class="setRadio">
                {{ gender }}
              </label>
            </div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12 imgDiv">
            <label for="photo">Employee photo <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
              <div><img [src]="url" name="photo" width=120px height=150px *ngIf="url"></div>
              <div>
                <input type="file" (change)="selectFile($event)" formControlName="url" required accept="image/*">
                <div [innerHtml]='msg' *ngIf="msg" style="color: red;"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="phone">Phone Number <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
              <input
              type="text"
              id="phone"
              formControlName="phone"
              class="form-control">
            </div>
            <div *ngIf="signupForm.get('userData.phone').hasError('required') && signupForm.get('userData.phone').touched" class="help-block">Please enter phone number!</div>
            <div *ngIf="signupForm.get('userData.phone').hasError('invalidPhone') && signupForm.get('userData.phone').touched" class="help-block">Invalid phone number!</div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="phone2">Alternate Phone Number</label>
            <div class="col-xs-12 col-md-12">
              <input
              type="text"
              id="phone2"
              formControlName="phone2"
              class="form-control">
            </div>
            <div *ngIf="signupForm.get('userData.phone2').hasError('invalidPhone') && signupForm.get('userData.phone2').touched" class="help-block">Invalid phone number!</div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="pan">PAN Number</label>
            <div class="col-xs-12 col-md-12">
              <input
              type="text"
              id="pan"
              formControlName="pan"
              class="form-control">
            </div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="aadhar">Aadhar Number <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
              <input
              type="number"
              id="aadhar"
              formControlName="aadhar"
              class="form-control">
            </div>
            <div *ngIf="signupForm.get('userData.aadhar').hasError('required') && signupForm.get('userData.aadhar').touched" class="help-block">Please enter Aadhar number!</div>
            <div *ngIf="signupForm.get('userData.aadhar').hasError('invalidAadhar') && signupForm.get('userData.aadhar').touched" class="help-block">Invalid Aadhar number!</div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="address1">Current Address <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
              <textarea
              id="address1"
              rows="2"
              formControlName="address1"
              class="form-control"></textarea>
            </div>
            <div *ngIf="signupForm.get('userData.address1').hasError('required') && signupForm.get('userData.address1').touched" class="help-block">Please enter address!</div>
            <div *ngIf="signupForm.get('userData.address1').dirty" class="copied">
              <input id="copy" name="copy" type="checkbox" formControlName="copy" (change)="copyAddress()">
              <label for="copy"> This is permanant address.</label>
            </div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="address2">Permanent Address</label>
            <div class="col-xs-12 col-md-12">
              <textarea
              id="address2"
              rows="2"
              formControlName="address2"
              class="form-control"></textarea>
            </div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="city">City</label>
            <div class="col-xs-12 col-md-12">
              <input
              type="text"
              id="city"
              formControlName="city"
              class="form-control">
            </div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="state">State <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
            <select
              id="state"
              name="state"
              formControlName="state"
              class="form-control">
              <option value="">--Select one--</option>
              <option *ngFor="let item of states" value={{item}}>
                {{item}}
              </option>
            </select>
            </div>
            <div *ngIf="signupForm.get('userData.state').hasError('required') && signupForm.get('userData.state').touched" class="help-block">Please select a state!</div>
          </div>
        </div>

        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="country">Country <span class="help-block">*</span></label>
            <div class="col-xs-12 col-md-12">
            <select
              id="country"
              name="country"
              formControlName="country"
              (change)="openStates()"
              class="form-control">
              <option value="">--Select one--</option><option value="India">India</option>
                <option value="USA">U.S.A</option><option value="UK">U.K</option>
                <option value="Japan">Japan</option><option value="France">France</option><option value="Russia">Russia</option>
            </select>
            </div>
            <div *ngIf="signupForm.get('userData.country').hasError('required') && signupForm.get('userData.country').touched" class="help-block">Please select a country!</div>
          </div>
        </div>
        
        <div class="row col-md-12">
          <div class="form-group col-md-12">
            <label for="pin">Pincode</label>
            <div class="col-xs-12 col-md-12">
              <input
              type="number"
              id="pin"
              formControlName="pin"
              class="form-control">
            </div>
            <div *ngIf="signupForm.get('userData.pin').hasError('required') && signupForm.get('userData.pin').touched" class="help-block">Please enter Pincode!</div>
            <div *ngIf="signupForm.get('userData.pin').hasError('invalidPin') && signupForm.get('userData.pin').touched" class="help-block">Invalid Pincode!</div>
          </div>
        </div>

        <div id="clickable">
          <button class="btn btn-primary" type="submit" >Submit</button>
        </div>
    </div>
    </form>
    <span
          *ngIf="signupForm.invalid && signupForm.touched"
          class="help-block">Please enter valid data!</span>
  </div>
</div>
<app-display *ngIf="submitted" [user]="user" [url]="url"></app-display>
<!--
<div class="row" >
  <div class="col-xs-12">
    <h3>Your Data</h3>
    <p>Employee photo:<img [src]="url" width=120px height=150px *ngIf="url"></p>
    <p>Username: {{signupForm.value.userData.fname+" "+signupForm.value.userData.lname}}" </p>
    <p>Date of Birth: {{signupForm.value.userData.dob }}</p>
    <p>Mail: {{signupForm.value.userData.email }}</p>
    <p>Gender: {{signupForm.value.userData.gender}}</p>
    <p>PAN Number: {{signupForm.value.userData.pan }}</p>
    <p>Aadhar Number: {{signupForm.value.userData.aadhar }}</p>
    <p>Mobile Number: {{signupForm.value.userData.phone}}</p>
    <p>Alternate Mobile Number: {{ signupForm.value.userData.phone2}}</p>
    <p>City: {{signupForm.value.userData.city}}</p>
    <p>Current Address: {{signupForm.value.userData.address1}}</p>
    <p>Permanent Address: {{signupForm.value.userData.address2}}</p>
    <p>State:{{signupForm.value.userData.state}}</p>
    <p>Country:{{signupForm.value.userData.country}}</p>
    <p>Pincode: {{signupForm.value.userData.pin}}</p> 
  </div>
</div>
-->
